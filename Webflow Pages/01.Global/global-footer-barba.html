<script src="https://cdnjs.cloudflare.com/ajax/libs/scrollify/1.0.21/jquery.scrollify.min.js"></script>
<!-- <script src="https://unpkg.com/@barba/core"></script> -->
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.6.0/gsap.min.js"></script> -->

<style type="text/css">
    @media screen and (max-width: 991px) {
        br {
            display: none;
        }
    }

    ol.pagination {
        position: fixed;
        right: 2rem;
        top: 50%;
        transform: translate(0, -50%);
        z-index: 9999;
        font-family: 'Noe Display', serif;
        color: #e05638;
        display: grid;
        grid-template-columns: 1fr;
        grid-gap: 2rem;
    }

    ol.pagination:hover {
        color: #e05638;
    }

    ol.pagination li {
        transition: all 300ms;
        transform: translate(50%, 0);
    }

    ol.pagination a {
        text-decoration: none;
        transition: all 300ms;
        opacity: 0;
    }

    ol.pagination a:before {
        content: '';
        display: inline-block;
        border-top: 1px solid #e05638;
        width: 3rem;
        margin: 0 1rem;
        transform: translate(0, -0.25rem);
    }

    ol.pagination li.active {
        transform: translate(0, 0);
    }

    ol.pagination li.active a {
        opacity: 1;
    }

    @media (max-width: 1024px) {
        ol.pagination {
            display: none;
        }
    }
</style>

<script>
    // scrollify .panel scrolljack + scrollsnap

    function scroll_page() {
        if (window.innerWidth < 1024) {
            if (window.innerHeight > window.innerWidth) {
                $.scrollify.destroy();
            }
        }
        else {
            $(function () {
                $.scrollify({
                    section: ".panel",
                    before: function (i, panels) {

                        var ref = panels[i].attr("data-section-name");

                        $(".pagination .active").removeClass("active");

                        $(".pagination").find("a[href=\"#" + ref + "\"]").parent().addClass("active");
                    },
                    afterRender: function () {
                        var pagination = "<ol class=\"pagination\">";
                        var activeClass = "";
                        $(".panel").each(function (i) {
                            var section = $(this).attr("data-section-name");
                            var prettyname = section.split('-').join(' ');
                            activeClass = "";
                            if (i === $.scrollify.currentIndex()) {
                                activeClass = "active";
                            }
                            pagination += "<li class=\"" + activeClass + "\"><a href=\"#" + section + "\"><span class=\"hover-text\">" + prettyname.charAt(0).toUpperCase() + prettyname.slice(1) + "</span></a></li>";
                        });

                        pagination += "</ol>";

                        $("#main-content").append(pagination);
                        /*

                        Tip: The two click events below are the same:

                        $(".pagination a").on("click",function() {
                          $.scrollify.move($(this).attr("href"));
                        });

                        */
                        $(".pagination a").on("click", $.scrollify.move);
                    }
                });
            });
        }
    }

    scroll_page();

    window.addEventListener('resize', function (event) {
        scroll_page();
    });

</script>
<!-- <script>
    barba.init({
        transitions: [{
            name: 'opacity-transition',
            leave(data) {
                gsap.to(".menu", { opacity: 0 });
                return gsap.to(data.current.container, {
                    opacity: 0,
                    x: '100%',
                    ease: 'power3.easeInOut',
                    duration: 0.5
                });
            },
            enter(data) {
                gsap.from(".menu", { opacity: 0 });
                return gsap.from(data.next.container, {
                    opacity: 0,
                    x: '-100%',
                    ease: 'power3.easeInOut',
                    duration: 0.5
                });
            }
        }]
    });
</script> -->